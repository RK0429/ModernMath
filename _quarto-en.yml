project:
  type: website
  title: "Mathematics Knowledge Graph Wiki"
  output-dir: _site/en
  render:
    - "*.qmd"
    - "content/en/"
    - "nav/en/"
    - "!content/ja/"
    - "!nav/ja/"
    - "!design_EN/"
    - "!design_JA/"
    - "!docs/design_EN/"

website:
  title: "Math Knowledge Graph"
  favicon: favicon.ico
  navbar:
    left:
      - text: "Home"
        href: index.qmd
      - text: "Algebra"
        href: content/en/algebra/index.qmd
      - text: "Analysis"
        href: content/en/analysis/index.qmd
      - text: "Topology"
        href: content/en/topology/index.qmd
      - text: "Geometry"
        href: content/en/geometry/index.qmd
      - text: "Category Theory"
        href: content/en/category-theory/index.qmd
      - text: "Combinatorics"
        href: content/en/combinatorics/index.qmd
      - text: "Logic & Set Theory"
        href: content/en/logic-set-theory/index.qmd
      - text: "Number Theory"
        href: content/en/number-theory/index.qmd
      - text: "Probability & Statistics"
        href: content/en/probability-statistics/index.qmd
      - text: "About"
        href: nav/en/about.qmd
      - text: "Writing Progress"
        href: nav/en/writing-progress.qmd
      - text: "Contributing"
        href: nav/en/contributing.qmd
    right:
      - text: "üåê Êó•Êú¨Ë™û"
        href: ../ja/index.html
      - icon: github
        href: https://github.com/RK0429/ModernMath
        aria-label: github
  sidebar:
    - id: algebra
      title: "Algebra"
      contents:
        - content/en/algebra/*.qmd
    - id: analysis
      title: "Analysis"
      contents:
        - content/en/analysis/*.qmd
    - id: topology
      title: "Topology"
      contents:
        - content/en/topology/*.qmd
    - id: geometry
      title: "Geometry"
      contents:
        - content/en/geometry/*.qmd
    - id: category-theory
      title: "Category Theory"
      contents:
        - content/en/category-theory/*.qmd
    - id: combinatorics
      title: "Combinatorics"
      contents:
        - content/en/combinatorics/*.qmd
    - id: logic-set-theory
      title: "Logic & Set Theory"
      contents:
        - content/en/logic-set-theory/*.qmd
    - id: number-theory
      title: "Number Theory"
      contents:
        - content/en/number-theory/*.qmd
    - id: probability-statistics
      title: "Probability & Statistics"
      contents:
        - content/en/probability-statistics/*.qmd
  page-footer:
    center: |
      Mathematics Knowledge Graph Wiki - Built with Quarto and RDF

format:
  html:
    theme: cosmo
    css:
      - design-tokens.css
      - styles.css
      - styles-multilingual.css
    toc: true
    toc-depth: 3
    toc-location: right
    code-copy: true
    code-overflow: wrap
    html-math-method: mathjax
    lang: en
    include-in-header:
      - text: |
          <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
      - text: |
          <script>
            window.siteLanguage = 'en';
            window.alternateLanguage = 'ja';
            window.alternateLanguageUrl = '../ja/';
            // Calculate the correct path to js directory based on current location
            (function() {
              var path = window.location.pathname;

              // Find the base path for the English site
              // Look for where '/en/' appears in the path
              var enIndex = path.indexOf('/en/');
              var basePath = '';

              if (enIndex !== -1) {
                // Extract everything up to and including '/en/'
                var siteRoot = path.substring(0, enIndex + 4); // +4 to include '/en/'
                basePath = siteRoot;
              } else {
                // Fallback: calculate relative path
                var pathParts = path.split('/').filter(function(part) {
                  return part && !part.endsWith('.html');
                });

                // Count depth and build relative path
                var depth = pathParts.length;
                for (var i = 0; i < depth; i++) {
                  basePath += '../';
                }
              }

              // Ensure basePath ends with /
              if (basePath && !basePath.endsWith('/')) {
                basePath += '/';
              }

              // Load language switcher
              var script = document.createElement('script');
              script.src = basePath + 'js/language-switcher.js';
              script.defer = true;
              document.head.appendChild(script);

              // Load issue button
              var issueScript = document.createElement('script');
              issueScript.src = basePath + 'js/issue-button.js';
              issueScript.defer = true;
              document.head.appendChild(issueScript);

              // Load Buy Me a Coffee button
              var bmcScript = document.createElement('script');
              bmcScript.src = basePath + 'js/buy-me-coffee-button.js';
              bmcScript.defer = true;
              document.head.appendChild(bmcScript);

              // Load Mobile Footer
              var mobileScript = document.createElement('script');
              mobileScript.src = basePath + 'js/mobile-footer.js';
              mobileScript.defer = true;
              document.head.appendChild(mobileScript);
            })();
          </script>
    mathjax:
      tags: ams
      macros:
        R: '\mathbb{R}'
        Z: '\mathbb{Z}'
        N: '\mathbb{N}'
        C: '\mathbb{C}'
        Q: '\mathbb{Q}'
        implies: '\Rightarrow'
        iff: '\Leftrightarrow'

filters:
  - math-environments
  - graph-viz
  - translation-metadata
  - article-type

execute:
  freeze: auto

bibliography: references.bib

resources:
  - knowledge_graph.ttl
  - .nojekyll
  - output/interactive
  - output/d3-data
  - js/language-switcher.js
  - js/issue-button.js
  - js/buy-me-coffee-button.js
  - js/mobile-footer.js
  - js/table-sort-filter.js
  - formal
